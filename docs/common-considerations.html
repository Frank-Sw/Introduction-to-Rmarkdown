<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Introduction to R Markdown</title>
  <meta name="description" content="An Introduction to RMarkdown">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Introduction to R Markdown" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://m-clark.github.io/Introduction-to-Rmarkdown" />
  <meta property="og:image" content="https://m-clark.github.io/Introduction-to-Rmarkdownimg/nineteeneightyR.png" />
  <meta property="og:description" content="An Introduction to RMarkdown" />
  <meta name="github-repo" content="m-clark/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Introduction to R Markdown" />
  
  <meta name="twitter:description" content="An Introduction to RMarkdown" />
  <meta name="twitter:image" content="https://m-clark.github.io/Introduction-to-Rmarkdownimg/nineteeneightyR.png" />



<meta name="date" content="2018-03-04">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  <link rel="shortcut icon" href="img/R.ico" type="image/x-icon">
<link rel="prev" href="standard-documents.html">
<link rel="next" href="customization-configuration.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.0/htmlwidgets.js"></script>
<script src="libs/datatables-binding-0.2/datatables.js"></script>
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.12/js/jquery.dataTables.min.js"></script>
<script src="libs/plotly-binding-4.7.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotlyjs-1.29.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotlyjs-1.29.2/plotly-latest.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/book.css" type="text/css" />
<link rel="stylesheet" href="css/standard_html.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class='before'"><a href="https://m-clark.github.io/Introduction-to-Rmarkdown/">Introduction to R Markdown</a></li>

<li class="divider"></li>
<li><a href="index.html#section"></a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#goals"><i class="fa fa-check"></i>Goals</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="concepts.html"><a href="concepts.html"><i class="fa fa-check"></i>Concepts</a><ul>
<li class="chapter" data-level="" data-path="concepts.html"><a href="concepts.html#how-to-read-this-chapter"><i class="fa fa-check"></i>How to read this chapter</a></li>
<li class="chapter" data-level="" data-path="concepts.html"><a href="concepts.html#literate-programming"><i class="fa fa-check"></i>Literate Programming</a></li>
<li class="chapter" data-level="" data-path="concepts.html"><a href="concepts.html#replicability-reproducible-research"><i class="fa fa-check"></i>Replicability &amp; reproducible research</a></li>
<li class="chapter" data-level="" data-path="concepts.html"><a href="concepts.html#dynamic-data-analysis-report-generation"><i class="fa fa-check"></i>Dynamic data analysis &amp; report generation</a></li>
<li class="chapter" data-level="" data-path="concepts.html"><a href="concepts.html#why-you-should-switch-from-your-current-approach"><i class="fa fa-check"></i>Why you should switch from your current approach</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i>Getting Started</a><ul>
<li class="chapter" data-level="" data-path="getting-started.html"><a href="getting-started.html#what-is-markdown"><i class="fa fa-check"></i>What is Markdown?</a></li>
<li class="chapter" data-level="" data-path="getting-started.html"><a href="getting-started.html#documents"><i class="fa fa-check"></i>Documents</a></li>
<li class="chapter" data-level="" data-path="getting-started.html"><a href="getting-started.html#presentations"><i class="fa fa-check"></i>Presentations</a></li>
<li class="chapter" data-level="" data-path="getting-started.html"><a href="getting-started.html#shiny-apps"><i class="fa fa-check"></i>Shiny Apps</a></li>
<li class="chapter" data-level="" data-path="getting-started.html"><a href="getting-started.html#templates"><i class="fa fa-check"></i>Templates</a></li>
<li class="chapter" data-level="" data-path="getting-started.html"><a href="getting-started.html#how-to-start"><i class="fa fa-check"></i>How to start</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="standard-documents.html"><a href="standard-documents.html"><i class="fa fa-check"></i>Standard Documents</a><ul>
<li class="chapter" data-level="" data-path="standard-documents.html"><a href="standard-documents.html#r-markdown-files"><i class="fa fa-check"></i>R Markdown files</a><ul>
<li class="chapter" data-level="" data-path="standard-documents.html"><a href="standard-documents.html#html"><i class="fa fa-check"></i>HTML</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="standard-documents.html"><a href="standard-documents.html#text"><i class="fa fa-check"></i>Text</a></li>
<li class="chapter" data-level="" data-path="standard-documents.html"><a href="standard-documents.html#code"><i class="fa fa-check"></i>Code</a><ul>
<li class="chapter" data-level="" data-path="standard-documents.html"><a href="standard-documents.html#chunks"><i class="fa fa-check"></i>Chunks</a></li>
<li class="chapter" data-level="" data-path="standard-documents.html"><a href="standard-documents.html#in-line"><i class="fa fa-check"></i>In-line</a></li>
<li class="chapter" data-level="" data-path="standard-documents.html"><a href="standard-documents.html#labels"><i class="fa fa-check"></i>Labels</a></li>
<li class="chapter" data-level="" data-path="standard-documents.html"><a href="standard-documents.html#running-code"><i class="fa fa-check"></i>Running code</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="standard-documents.html"><a href="standard-documents.html#multiple-documents"><i class="fa fa-check"></i>Multiple documents</a></li>
<li class="chapter" data-level="" data-path="standard-documents.html"><a href="standard-documents.html#collaboration"><i class="fa fa-check"></i>Collaboration</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="common-considerations.html"><a href="common-considerations.html"><i class="fa fa-check"></i>Common Considerations</a><ul>
<li class="chapter" data-level="" data-path="common-considerations.html"><a href="common-considerations.html#using-html"><i class="fa fa-check"></i>Using HTML</a></li>
<li class="chapter" data-level="" data-path="common-considerations.html"><a href="common-considerations.html#chunk-options"><i class="fa fa-check"></i>Chunk options</a><ul>
<li class="chapter" data-level="" data-path="common-considerations.html"><a href="common-considerations.html#setup-to-apply-to-all"><i class="fa fa-check"></i>Setup to apply to all</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="common-considerations.html"><a href="common-considerations.html#image-options"><i class="fa fa-check"></i>Image options</a><ul>
<li class="chapter" data-level="" data-path="common-considerations.html"><a href="common-considerations.html#r-graphics"><i class="fa fa-check"></i>R graphics</a></li>
<li class="chapter" data-level="" data-path="common-considerations.html"><a href="common-considerations.html#markdown"><i class="fa fa-check"></i>Markdown</a></li>
<li class="chapter" data-level="" data-path="common-considerations.html"><a href="common-considerations.html#img"><i class="fa fa-check"></i>img</a></li>
<li class="chapter" data-level="" data-path="common-considerations.html"><a href="common-considerations.html#image-summary"><i class="fa fa-check"></i>Image summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="common-considerations.html"><a href="common-considerations.html#caching"><i class="fa fa-check"></i>Caching</a></li>
<li class="chapter" data-level="" data-path="common-considerations.html"><a href="common-considerations.html#cleaning-up-output"><i class="fa fa-check"></i>Cleaning up output</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="customization-configuration.html"><a href="customization-configuration.html"><i class="fa fa-check"></i>Customization &amp; Configuration</a><ul>
<li class="chapter" data-level="" data-path="customization-configuration.html"><a href="customization-configuration.html#output-options"><i class="fa fa-check"></i>Output options</a><ul>
<li class="chapter" data-level="" data-path="customization-configuration.html"><a href="customization-configuration.html#themes-etc."><i class="fa fa-check"></i>Themes etc.</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="customization-configuration.html"><a href="customization-configuration.html#yaml"><i class="fa fa-check"></i>YAML</a></li>
<li class="chapter" data-level="" data-path="customization-configuration.html"><a href="customization-configuration.html#html-css"><i class="fa fa-check"></i>HTML &amp; CSS</a><ul>
<li class="chapter" data-level="" data-path="customization-configuration.html"><a href="customization-configuration.html#html-1"><i class="fa fa-check"></i>HTML</a></li>
<li class="chapter" data-level="" data-path="customization-configuration.html"><a href="customization-configuration.html#css"><i class="fa fa-check"></i>CSS</a></li>
<li class="chapter" data-level="" data-path="customization-configuration.html"><a href="customization-configuration.html#custom-classes"><i class="fa fa-check"></i>Custom classes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="customization-configuration.html"><a href="customization-configuration.html#personal-templates"><i class="fa fa-check"></i>Personal Templates</a></li>
<li class="chapter" data-level="" data-path="customization-configuration.html"><a href="customization-configuration.html#the-rabbit-hole-goes-deep"><i class="fa fa-check"></i>The Rabbit Hole Goes Deep</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="comparison-to-alternatives.html"><a href="comparison-to-alternatives.html"><i class="fa fa-check"></i>Comparison to Alternatives</a><ul>
<li class="chapter" data-level="" data-path="comparison-to-alternatives.html"><a href="comparison-to-alternatives.html#pdf-latex"><i class="fa fa-check"></i>PDF &amp; LaTeX</a><ul>
<li><a href="comparison-to-alternatives.html#latex"><span class="math inline">\(\LaTeX\)</span></a></li>
<li class="chapter" data-level="" data-path="comparison-to-alternatives.html"><a href="comparison-to-alternatives.html#pdf-via-r-markdown"><i class="fa fa-check"></i>PDF via R Markdown</a></li>
<li class="chapter" data-level="" data-path="comparison-to-alternatives.html"><a href="comparison-to-alternatives.html#tufte"><i class="fa fa-check"></i>Tufte</a></li>
<li class="chapter" data-level="" data-path="comparison-to-alternatives.html"><a href="comparison-to-alternatives.html#a-final-word"><i class="fa fa-check"></i>A final word</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="comparison-to-alternatives.html"><a href="comparison-to-alternatives.html#ms-word"><i class="fa fa-check"></i>MS Word</a><ul>
<li class="chapter" data-level="" data-path="comparison-to-alternatives.html"><a href="comparison-to-alternatives.html#word-like-alternatives"><i class="fa fa-check"></i>Word-like Alternatives</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="exercise.html"><a href="exercise.html"><i class="fa fa-check"></i>Exercise</a></li>
<li class="divider"></li>
<li class='after'"><a href="https://m-clark.github.io/"><img src="img/mc.png" style="width:50%; padding:0px 0; display:block; margin: 0 auto;" alt="MC logo"></a></li>
<li class='after'"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="width:50%; border-width:0; display:block; margin: 0 auto;" src="img/ccbysa.png" /></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><span style="font-size:125%; font-family:Roboto; font-style:normal">Introduction to R Markdown</span></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="common-considerations" class="section level1">
<h1>Common Considerations</h1>
<p>In creating a document there several things that consistently come up that you’ll want to be aware of, and we’ll visit some of those here.</p>
<div id="using-html" class="section level2">
<h2>Using HTML</h2>
<p>The first thing to do is simply get used to HTML as your primary output. Unless you know something is to be printed you won’t gain anything but an uglier and/or less flexible document without having to put notably more effort into development.</p>
</div>
<div id="chunk-options" class="section level2">
<h2>Chunk options</h2>
<p>A ridiculous number of <a href="https://yihui.name/knitr/options/">options</a> are available to you for each, or all chunks. Spend a little time to see what all is available. The options I commonly use are:</p>
<ul>
<li><code>echo</code>: controls whether and how you want to <em>show</em> your code</li>
<li><code>eval</code>: controls whether and how you want to <em>run</em> your code</li>
<li>figure controls: <code>fig.*</code> <code>out.*</code>etc.</li>
</ul>
<div id="setup-to-apply-to-all" class="section level3">
<h3>Setup to apply to all</h3>
<p>Then there are other options that I set at the beginning of a document. The reason for doing so is because I will rarely, if ever, want these options changed. As such, I specify them at the beginning, and only change them as need be for specific chunks.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">echo =</span> T, <span class="dt">message=</span>F, <span class="dt">warning=</span>F, <span class="dt">error=</span>F, </a>
<a class="sourceLine" id="cb8-2" data-line-number="2">                      <span class="dt">comment=</span><span class="ot">NA</span>, <span class="dt">cache=</span>T, <span class="dt">R.options=</span><span class="kw">list</span>(<span class="dt">width=</span><span class="dv">220</span>), </a>
<a class="sourceLine" id="cb8-3" data-line-number="3">                      <span class="dt">fig.align=</span><span class="st">&#39;center&#39;</span>, <span class="dt">out.width=</span><span class="st">&#39;75%&#39;</span>, <span class="dt">fig.asp=</span>.<span class="dv">75</span>)</a></code></pre></div>
<p>These options do things like make sure messages, warnings, and errors don’t show up in the document.<span class="marginnote">You can still get errors, and they will keep your document from compiling.</span> Note that any specific chunk options will override these. So, you’ll always have fine control over how things work.</p>
<p>You can also specify options for the way <span class="pack">knitr</span> itself works. For example, Rmd documents by default ignore the fact that you are using an RStudio project, and instead work from wherever the Rmd file is. Using <code>root.dir</code> can correct this. There is also a global option you can set via the tools menu<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">knitr<span class="op">::</span>opts_knit<span class="op">$</span><span class="kw">set</span>(<span class="dt">root.dir =</span> <span class="st">&#39;../&#39;</span>, <span class="dt">child =</span> <span class="st">&#39;someotherdoc.Rmd&#39;</span>)</a></code></pre></div>
</div>
</div>
<div id="image-options" class="section level2">
<h2>Image options</h2>
<p>There are primarily three ways you’ll display images. Some will be the result of R code, possibly even interactive. In other instances, you’ll already have access to an image file and want to display it via markdown or HTML. Technically you could do this with R code as well, but it’d be more trouble than necessary, as markdown and HTML already provide the means.</p>
<div id="r-graphics" class="section level3">
<h3>R graphics</h3>
<p>Where to begin? There are many, many ways to manipulate an image that is produced by your R code, and this is not necessarily a good thing. Thankfully, the default settings may be enough, but in my experience it rarely is.</p>
<div id="html-vs.others" class="section level4">
<h4>HTML vs. Others</h4>
<p>To begin, there are different systems for PDF or MS Word vs. HTML-based documents. For non-HTML, the chunk options of <code>fig.width</code> and <code>fig.height</code> generally used for figure dimensions. Oddly, these are expressed in inches, but at least it is easy enough to manipulate to your liking. These will not affect interactive and possibly other images in HTML documents except in unexpected ways<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a>. You can also supply <code>fig.width</code> plus <code>fig.asp</code> which will produce a height that is <code>fig.width*fig.asp</code>. There is also <code>fig.dim</code>, which will take the two values you would have specified for <code>fig.width</code> and <code>fig.height</code>. If you supply <code>fig.dim</code> with <code>fig.asp</code>, the latter will be ignored. If expressing size in inches doesn’t make sense to you, you can use <code>dpi</code>, which will allow you to know think of <code>dpi*inches</code> as what to expect in terms of pixels. You also have <code>fig.align</code> with options like ‘left’ and ‘center’, but it apparently has no effect on <span class="pack">htmlwidgets</span> and similar packages that rely on other languages like JavaScript.</p>
<p>Isn’t this fun? Here is some more.</p>
<p>The <code>out.width</code> and <code>out.height</code> options are geared toward HTML-based visualization, and are expressed in pixels, or perhaps most usefully, percentages, but they will also affect other documents via <span class="math inline">\(\LaTeX\)</span>. There is also <code>out.extra</code> that will apply additional arguments (e.g. css/img styling). These <code>out.*</code> can also apply to <span class="math inline">\(\LaTeX\)</span> figures but I can’t figure out why. I also find that <code>out.height</code> actually does nothing in many cases. What’s more, you can use them alongside <code>fig.width</code> and <code>fig.height</code> to ensure you’ll have utterly no idea what will be produced in the finished product. The option <code>fig.retina</code> will only work for HTML documents, and will scale your image such that it will “change the chunk option dpi to dpi * fig.retina, and out.width to fig.width * dpi / fig.retina internally; for example, the physical size of an image is doubled and its display size is halved when fig.retina = 2”. It might not have any discernible effect that you can actually see in the document depending on your default settings, but would allow viewers to zoom without loss of clarity, though they could do that with an <strong>svg</strong> image anyway. You may specify the image output type, *.png or *.svg for example, with <code>fig.dev</code>.</p>
<p>In the following, all of these arguments might have an effect on the resulting image.</p>
<pre><code>``{r, fig.width=3, fig.height=4, out.width=&#39;30%&#39;, fig.retina=2}
library(plotly)
data %&gt;% 
  plot_ly(width=500) %&gt;% # in pixels!
  add_markers(~x, ~y)
``</code></pre>
<p>In short, for my typical usage, having all these options is nice, but mostly just confusing, because all I ever really need to specify is width, height and alignment. See the summary for a simplified approach. In addition, there are many other options, e.g. captions, that may come in handy.</p>
<!-- ```{r} -->
<!-- # fig.width default -->
<!-- library(plotly) -->
<!-- mtcars %>%  -->
<!--   plot_ly(x=~wt, y=~mpg) -->
<!-- ``` -->
<!-- ```{r fig.width=2} -->
<!-- # fig.width = 2 -->
<!-- mtcars %>%  -->
<!--   plot_ly(x=~wt, y=~mpg) -->
<!-- ``` -->
<!-- ```{r fig.height=2} -->
<!-- # fig.height = 2; same as default -->
<!-- mtcars %>%  -->
<!--   plot_ly(x=~wt, y=~mpg) -->
<!-- ``` -->
<!-- ```{r fig.width=10} -->
<!-- # fig.width = 10 -->
<!-- mtcars %>%  -->
<!--   plot_ly(x=~wt, y=~mpg) -->
<!-- ``` -->
</div>
<div id="package-options" class="section level4">
<h4>Package options</h4>
<p>As depicted in the above example, you often can modify the display settings of the plot with options of the visualization package you’re using. This will possibly override, or merely interact with, the chunk options, so use with caution.</p>
</div>
</div>
<div id="markdown" class="section level3">
<h3>Markdown</h3>
<p>Markdown provides a basic way to insert images into the document as follows.</p>
<pre><code>![alt-text](img/myimage.png)</code></pre>
<p>It’s identical to a link, just with an exclamation point. Unfortunately, that’s it. You can’t specify anything about the image, so it’s rarely going to be useful.</p>
</div>
<div id="img" class="section level3">
<h3>img</h3>
<p>The typical way to insert an image is with HTML. This allows you to specify all the options you need to align and style it.</p>
<pre><code>&lt;img src=&quot;img/myimage.png&quot; style=&quot;display:block; margin: 0 auto;&quot;&gt;</code></pre>
<p>This should probably be your default approach to inserting images in your document that aren’t produced by R code.</p>
</div>
<div id="image-summary" class="section level3">
<h3>Image summary</h3>
<p>If you are going to do PDF or MS Word, or doing static plots in HTML, <code>fig.width</code>, <code>fig.height</code>, and <code>fig.align</code> will likely take care of most of your needs. For HTML, I use <code>out.width</code> with a given percentage, plus <code>fig.asp</code>, and that has solved a lot of my remaining issues. For image files, I use &lt;img&gt; because the markdown approach is really too bare bones. I suggest you set your figure options at the beginning of the document so that your images will be consistent, and modify if necessary for a specific chunk. I don’t see much need for anything beyond svg and png, the latter if file size is a concern only. You’ll want scalable images, as provided by svg<span class="marginnote">The <span class="pack">svglite</span> package will create smaller svg files, and can be specified with <code>fig.dev</code> just like svg or png.</span>, because you don’t know what device people are using or if they want to zoom.</p>
</div>
</div>
<div id="caching" class="section level2">
<h2>Caching</h2>
<p><span class="emph">Caching</span> is both a great thing and continuous source of frustration. First, what is it? Caching saves the output of your R chunks into compressed files (*.RData) into a folder in the directory of your current project (or some sub-directory of your choosing). The next time you compile the document, you don’t actually have to run any code, if the code hasn’t changed; it will just call the cached object. When your document has a lot of computations, or in the spirit of reproducibility, actually runs your models, this will save a lot of time.</p>
<p><img src="img/cache.png" style="display:block; margin: 0 auto;" width=50%></p>
<p>However, this is not a straightforward process. When things change, the cache for the chunk must change. But what about subsequent chunks that depend on those results? The following is from the <span class="pack">knitr</span> package author Yihui Xie:</p>
<blockquote>
<p>Let me repeat the three factors that can affect cache (any change on them will invalidate old cache):</p>
</blockquote>
<blockquote>
<ul>
<li>all chunk options except include; e.g. change tidy=TRUE to FALSE will break the old cache, but changing include will not affect R code in a chunk;</li>
<li>a tiny change in the R code will lead to removal of old cache, even if it is a change of a space or a blank line</li>
<li>the R option width (getOption(‘width’))</li>
</ul>
</blockquote>
<p>I’ll add that you also don’t typically cache an interactive visualization. You’ll often get a message to that effect if you try.</p>
<p>However, things often don’t work the way you expect with caching. If something unexpected happens, and if you’re naming the chunks, you can easily find and delete the offending files. You can also rebuild the cache as needed by setting <code>cache-rebuild</code> to true. However, if you delete or change the name of the chunk, those files will have to be explicitly removed, because they’ll never be called again. There is a <code>depends-on</code> chunk option that will allow you to update a cache if whatever previous chunk a chunk depends on has changed. In theory. In practice, you should probably just put <code>auto.dep</code> to true and let <span class="pack">knitr</span> sort out such dependencies, and even then issues may arise. Finally, some packages simply don’t work well with caching, or the process of generating a document in general.<span class="marginnote">If you ever use <span class="pack">DiagrammeR</span> for visualization, let me save you a lot of headache and tell you to never cache the chunks where you use it. The results are mind-boggling if you do, but will sometimes miraculously fail even when you don’t. Be prepared to constantly delete your cache to see the correct figure.</span> Just know that as great a feature this is, odd things will happen at some point. When something about your document starts breaking or doing unexpected things, if you can’t see a code problem, assume it’s a cache problem, and delete and/or rebuild.</p>
<p>I usually set cache to true, otherwise I’d be waiting minutes for some documents to compile every time. I set that as an option at the beginning of the document, but at various points in development I’ll set <code>cache-rebuild=TRUE</code> to refresh everything<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>, and at times I’ll set it to rebuild specific chunks (e.g. the code might not change, but the underlying object has)<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>. I’ve gotten to where I will set cache to false as an option for the (entire) current page I’m working on, so that I don’t have to rebuild everything, but for something in a more fluid stage, I probably don’t want to cache at all.</p>
</div>
<div id="cleaning-up-output" class="section level2">
<h2>Cleaning up output</h2>
<p>Several packages are available to make your R results look better. Here’s a default <span class="objclass">data.frame</span>, ugly.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">head</span>(mtcars)</a></code></pre></div>
<pre><code>                   mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<p>One can start with <span class="pack">knitr’s</span> <span class="func">kable</span> to create simple tables that look much better.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">knitr<span class="op">::</span><span class="kw">kable</span>(<span class="kw">head</span>(mtcars))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">mpg</th>
<th align="right">cyl</th>
<th align="right">disp</th>
<th align="right">hp</th>
<th align="right">drat</th>
<th align="right">wt</th>
<th align="right">qsec</th>
<th align="right">vs</th>
<th align="right">am</th>
<th align="right">gear</th>
<th align="right">carb</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mazda RX4</td>
<td align="right">21.0</td>
<td align="right">6</td>
<td align="right">160</td>
<td align="right">110</td>
<td align="right">3.90</td>
<td align="right">2.620</td>
<td align="right">16.46</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td>Mazda RX4 Wag</td>
<td align="right">21.0</td>
<td align="right">6</td>
<td align="right">160</td>
<td align="right">110</td>
<td align="right">3.90</td>
<td align="right">2.875</td>
<td align="right">17.02</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td>Datsun 710</td>
<td align="right">22.8</td>
<td align="right">4</td>
<td align="right">108</td>
<td align="right">93</td>
<td align="right">3.85</td>
<td align="right">2.320</td>
<td align="right">18.61</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td>Hornet 4 Drive</td>
<td align="right">21.4</td>
<td align="right">6</td>
<td align="right">258</td>
<td align="right">110</td>
<td align="right">3.08</td>
<td align="right">3.215</td>
<td align="right">19.44</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td>Hornet Sportabout</td>
<td align="right">18.7</td>
<td align="right">8</td>
<td align="right">360</td>
<td align="right">175</td>
<td align="right">3.15</td>
<td align="right">3.440</td>
<td align="right">17.02</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td>Valiant</td>
<td align="right">18.1</td>
<td align="right">6</td>
<td align="right">225</td>
<td align="right">105</td>
<td align="right">2.76</td>
<td align="right">3.460</td>
<td align="right">20.22</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td><br></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>That was easy! For interactivity and a lot more options to play with, consider the <span class="pack">DT</span> package.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">DT<span class="op">::</span><span class="kw">datatable</span>(mtcars, </a>
<a class="sourceLine" id="cb16-2" data-line-number="2">              <span class="dt">class =</span> <span class="st">&#39;nowrap&#39;</span>,</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">              <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">autoWidth =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">                             <span class="dt">columnDefs=</span><span class="kw">list</span>(<span class="kw">list</span>(<span class="dt">width=</span><span class="st">&#39;150px&#39;</span>, <span class="dt">targets=</span><span class="dv">0</span>))))</a></code></pre></div>
<div id="htmlwidget-9fc58835665b1651c584" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-9fc58835665b1651c584">{"x":{"filter":"none","data":[["Mazda RX4","Mazda RX4 Wag","Datsun 710","Hornet 4 Drive","Hornet Sportabout","Valiant","Duster 360","Merc 240D","Merc 230","Merc 280","Merc 280C","Merc 450SE","Merc 450SL","Merc 450SLC","Cadillac Fleetwood","Lincoln Continental","Chrysler Imperial","Fiat 128","Honda Civic","Toyota Corolla","Toyota Corona","Dodge Challenger","AMC Javelin","Camaro Z28","Pontiac Firebird","Fiat X1-9","Porsche 914-2","Lotus Europa","Ford Pantera L","Ferrari Dino","Maserati Bora","Volvo 142E"],[21,21,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26,30.4,15.8,19.7,15,21.4],[6,6,4,6,8,6,8,4,4,6,6,8,8,8,8,8,8,4,4,4,4,8,8,8,8,4,4,4,8,6,8,4],[160,160,108,258,360,225,360,146.7,140.8,167.6,167.6,275.8,275.8,275.8,472,460,440,78.7,75.7,71.1,120.1,318,304,350,400,79,120.3,95.1,351,145,301,121],[110,110,93,110,175,105,245,62,95,123,123,180,180,180,205,215,230,66,52,65,97,150,150,245,175,66,91,113,264,175,335,109],[3.9,3.9,3.85,3.08,3.15,2.76,3.21,3.69,3.92,3.92,3.92,3.07,3.07,3.07,2.93,3,3.23,4.08,4.93,4.22,3.7,2.76,3.15,3.73,3.08,4.08,4.43,3.77,4.22,3.62,3.54,4.11],[2.62,2.875,2.32,3.215,3.44,3.46,3.57,3.19,3.15,3.44,3.44,4.07,3.73,3.78,5.25,5.424,5.345,2.2,1.615,1.835,2.465,3.52,3.435,3.84,3.845,1.935,2.14,1.513,3.17,2.77,3.57,2.78],[16.46,17.02,18.61,19.44,17.02,20.22,15.84,20,22.9,18.3,18.9,17.4,17.6,18,17.98,17.82,17.42,19.47,18.52,19.9,20.01,16.87,17.3,15.41,17.05,18.9,16.7,16.9,14.5,15.5,14.6,18.6],[0,0,1,1,0,1,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,0,1,0,1,0,0,0,1],[1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1],[4,4,4,3,3,3,3,4,4,4,4,3,3,3,3,3,3,4,4,4,3,3,3,3,3,4,5,5,5,5,5,4],[4,4,1,1,2,1,4,2,2,4,4,3,3,3,4,4,4,1,2,1,1,2,2,4,2,1,2,2,4,6,8,2]],"container":"<table class=\"nowrap\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>mpg<\/th>\n      <th>cyl<\/th>\n      <th>disp<\/th>\n      <th>hp<\/th>\n      <th>drat<\/th>\n      <th>wt<\/th>\n      <th>qsec<\/th>\n      <th>vs<\/th>\n      <th>am<\/th>\n      <th>gear<\/th>\n      <th>carb<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"autoWidth":true,"columnDefs":[{"width":"150px","targets":0},{"className":"dt-right","targets":[1,2,3,4,5,6,7,8,9,10,11]},{"orderable":false,"targets":0}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p><br></p>
<p><span class="marginnote">Often after displaying tables and figures you’ll want to put an extra line with &lt;br&gt; to give some more space before your next bit of text.</span>
Even model objects can go straight to publication-ready tables with no effort on your part. The <span class="pack">broom</span> package works with many common model objects to convert their output to a <span class="objclass">data.frame</span> via <span class="func">tidy</span>. Then you can use <span class="pack">kable</span> or another package to pretty it up.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">broom<span class="op">::</span><span class="kw">tidy</span>(<span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>wt, mtcars)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>(<span class="dt">digits =</span> <span class="dv">2</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">37.29</td>
<td align="right">1.88</td>
<td align="right">19.86</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">wt</td>
<td align="right">-5.34</td>
<td align="right">0.56</td>
<td align="right">-9.56</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left"><br></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>The <span class="pack">pander</span> package provides more control over tables, but also can work with some model objects directly.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">lm</span>(mpg <span class="op">~</span><span class="st"> </span>wt, mtcars) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="st">  </span><span class="kw">summary</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="st">  </span>pander<span class="op">::</span><span class="kw">pander</span>(<span class="dt">round=</span><span class="dv">2</span>, <span class="dt">justify=</span><span class="st">&#39;lrrrr&#39;</span>, <span class="dt">caption=</span><span class="st">&#39;Regression results&#39;</span>)</a></code></pre></div>
<table style="width:86%;">
<colgroup>
<col width="25%" />
<col width="15%" />
<col width="18%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"> </th>
<th align="right">Estimate</th>
<th align="right">Std. Error</th>
<th align="right">t value</th>
<th align="right">Pr(&gt;|t|)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>(Intercept)</strong></td>
<td align="right">37.29</td>
<td align="right">1.88</td>
<td align="right">19.86</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left"><strong>wt</strong></td>
<td align="right">-5.34</td>
<td align="right">0.56</td>
<td align="right">-9.56</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<table style="width:86%;">
<caption>Regression results</caption>
<colgroup>
<col width="20%" />
<col width="30%" />
<col width="12%" />
<col width="22%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Observations</th>
<th align="center">Residual Std. Error</th>
<th align="center"><span class="math inline">\(R^2\)</span></th>
<th align="center">Adjusted <span class="math inline">\(R^2\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">32</td>
<td align="center">3.046</td>
<td align="center">0.7528</td>
<td align="center">0.7446</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>For converting such things to <span class="math inline">\(\LaTeX\)</span> syntax, you will want to look at <span class="pack">xtable</span>, <span class="pack">stargazer</span>, and <span class="pack">Hmisc</span>.<span class="marginnote">Even if you don’t need interactivity, I would add <span class="pack">DT</span> to your regular toolbox for tables, especially for HTML documents.</span></p>
<p>In summary, you can get to publication ready results with figures, tables and text by just using the standard options or available packages, without having to go through the usual tedium. That alone should be enough to start using R Markdown for many people.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="6">
<li id="fn6"><p>This global option in RStudio may not work at times.<a href="common-considerations.html#fnref6" class="footnote-back">↩</a></p></li>
<li id="fn7"><p>Changing <code>fig.width</code> for a <span class="pack">plotly</span> image seems to affect the height, while <code>fig.height</code> doesn’t do anything.<a href="common-considerations.html#fnref7" class="footnote-back">↩</a></p></li>
<li id="fn8"><p>For building website like documents, e.g. using <span class="pack">bookdown</span>, there is a <code>Clean All</code> option. However, all this does is delete files that get overwritten already, and so serves almost no purpose except to get rid of old files that are no longer part of the document.<a href="common-considerations.html#fnref8" class="footnote-back">↩</a></p></li>
<li id="fn9"><p>A better way to probably do this is with <code>cache.extra = tools::md5sum('myfile.csv')</code>. That will, for example, rebuild the cache if that csv file has changed.<a href="common-considerations.html#fnref9" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="standard-documents.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="customization-configuration.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["twitter", "facebook", "google"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "section",
"depth": 2,
"scroll_highlight": true
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
